# processlog

ローカル環境のプログラムのUIや通信、参照などはvercelサーバーを利用しています。
機能が利用できない観覧用vercel apiサーバー(ログイン時、DBに情報が登録されます。)

https://process-log.vercel.app/

現在一部のバグに修正が必要なアルファバージョンをPre-releaseとして公開しています。
気になる方はどうぞ : https://github.com/jphacks/sp_2501/releases/tag/AlphaVersion

![IMAGE ALT TEXT HERE](https://raw.githubusercontent.com/jphacks/sp_2501/refs/heads/main/sampleImage.png)
[![Video Label](http://img.youtube.com/vi/w3tBt64taQU/0.jpg)](https://youtu.be/w3tBt64taQU)
### ↑クリックすると簡単な試演の動画をご覧いただけます。↑
## 製品概要
`ProcessLog`は、PC上の活動を自動的に記録し、可視化・要約することで、日々のクリエイティブ制作や業務の振り返りを支援するシステムです。デスクトップアプリケーションが定期的にスクリーンショットを撮影し、Webアプリケーションがその情報を分析・整理します。

### 背景(製品開発のきっかけ、課題等）
日々のPC作業に集中していると、「どのようにそれを制作したのか」 「何にどれくらいの時間を使ったか」が曖昧になりがちです。特に、複数のタスクを並行して進める現代のワークスタイルでは、正確な活動記録を手動で残すことは困難です。この課題を解決するため、PCアクティビティを自動で記録し、簡単な操作で振り返ることができる本製品を開発しました。

---

## 製品説明
本システムは、以下の3つのレイヤーで構成されています。

1.  **デスクトップ・クライアント (Electron/Next.js + Python/PyInstaller):**
    ユーザーのローカルマシンで動作するアプリケーションです。**Electron (Next.js/React UI)** がフロントエンドを構成し、**PyInstallerでビルドされたPython実行ファイル**を制御します。バックグラウンドで定期的にスクリーンショットを撮影し、安全な認証を介してサーバーへ送信します。

2.  **Web API サーバー (Next.js/Vercel + Neon DB):**
    Vercelにホストされたサーバーレス API です。**Google OAuth**による認証を基盤とし、ローカルから送信されたデータを Neon DBに保存・管理します。

3.  **データ分析・AI処理 (GPT-4o):**
    分析処理には、高性能な**GPT-4o**モデルを使用し、複雑な画像比較や時系列要約を実行します。

### 特長
#### 1. 活動の自動記録
バックグラウンドでPC画面を自動撮影するため、ユーザーは特別な操作を意識することなく日々の活動を記録できます。

#### 2. 変更点の可視化とAIスコアリング
2つの画像を比較し、差分を抽出するだけでなく、その変化が持つ意味の**重要度を0.0〜1.0の範囲でスコアリング**するAI評価ロジックを実装しました。

#### 3. 活動の自動要約とレポート生成
記録された断片的な情報から、一日の流れをまとめたレポートを自動生成します。さらに、**Vercel Cron Job**と連携し、毎日の活動レポートを**自動で生成し保存**します。

### 解決出来ること
* 手作業による活動記録の煩わしさからの解放
* 「何に時間を使っているか」の客観的な可視化による生産性の向上
* 過去の作業内容の簡単な検索と振り返り

---

### 今後の展望
* 他ユーザーとの制作過程の閲覧を行える
* 制作過程を元に、就職活動や転職活動に生かせる
* 創作過程というAIの苦手分野への価値拡大

---

### 注力したこと（こだわり等）
* **Python実行ファイルとElectronの統合（PyInstaller）:** デスクトップアプリのElectronとPythonバックエンドを**PyInstallerで単一ファイル化**し、OSネイティブ機能とWeb UIの連携をシームレスに、かつ配布が容易な形で実現した点。
* **堅牢なクロスコンポーネント認証:** ローカルのPythonプロセスが、NextAuth.jsが発行する**セッションDBトークン**を利用して、セキュアなAPIリクエストを送信する仕組みを実装し、認証の信頼性を高めた点。
* **AI（GPT-5）を活用した高度な分析:** 単なる差分検出に留まらず、「重要度」のスコアリングや「活動の要約」といった高付加価値な情報を提供するAPIを設計・実装した点。

---

## 開発技術
### 活用した技術
#### API・データ
* **Next.js API Routes**
* **Prisma (ORM)**
* **Neon (PostgreSQL)**
* **OpenAI API (GPT-4o)**

#### フレームワーク・ライブラリ・モジュール
* **Webアプリ:** Next.js, React, **NextAuth.js (Google OAuth)**
* **デスクトップアプリ:** Electron, Next.js (Renderer), **PyInstaller**
* **スクリーンショット撮影 (Backend):** Python, Flask, mss

#### デバイス
* PC (Windows, macOS, Linux)

### 独自技術
#### ハッカソンで開発した独自機能・技術
* **画像差分分析API:** 2つの画像を比較し、変更点を抽出するだけでなく、その変化が持つ意味の重要度を0.0〜1.0の範囲でスコアリングする独自の評価ロジックを実装しました。これにより、ユーザーは大量のスクリーンショットの中から、注目すべき重要な変化を効率的に見つけ出すことができます。
    * 関連ファイル: `src/app/api/diff/route.ts`, `src/app/api/diff/developer-prompt.txt`
* **時系列テキスト要約API:** 断片的なテキスト群を時系列や文脈に沿って解釈し、一つのまとまった活動記録としてMarkdown形式で生成する機能を開発しました。単なるテキストの結合ではなく、ストーリーとして再構成することで、人間が読みやすい自然な文章を生成します。
    * 関連ファイル: `src/app/api/summary/route.ts`, `src/app/api/summary/developer-prompt.txt`
* **ハイブリッド・デスクトップアプリケーション（PyInstaller統合）:** Electronのメインプロセスから**PyInstallerでビルドされたPythonの実行ファイル（.exe）を直接起動・管理**する仕組みを構築しました。これにより、Python環境に依存することなく、単一のインストールファイルでOSネイティブ機能を利用可能です。
    * 関連ファイル: `processLog-screenshoter/src/index.ts`, `backend/dist/app.exe`
* **クロスコンポーネント認証連携:** デスクトップアプリのローカルプロセス（Python）がWebサーバーのセッション認証トークンを利用して、セキュアにAPIリクエストを送信する**認証連携プロセス**を実装しました。

---

## Q&A
### 撮影間隔
#### Q:撮影間隔を変更することはできるか？
-   撮影間隔の設定は、今後追加する課金サービスのプランによって変化します。
-   デフォルトでは5秒間隔となります。
### 容量
#### Q.スクリーンショットされた画像が多くなると、容量の負担があるのでは?
-   自動的にサーバーに送られて処理されたスクリーンショットは策上されます。
-   ユーザー側から削除せず保存を選択することもできます。デフォルト及び現在は保存以外使用できません。

